# 질문/답변 게시판의 요구사항

- 질문/답변 게시판에 처음 접근하면 질문 목록을 볼 수 있다. 
- 질문 목록 화면에서 회원가입, 로그인, 로그아웃, 개인정보 수정이 가능하며, 질문하기 화면으로 이동할 수 있다.
- 회원가입 버튼을 클릭하면 나타나는 화면으로 회원가입을 할 수 있다.
- 로그인 버튼을 누르면 나타나는 화면으로 회원가입한 사용자는 로그인이 가능하다.
- 처음 화면에서 질문하기 버튼을 클릭하면 나타나는 화면으로 사용자는 질문을 할 수 있다.
- 질문 목록 화면에서 각 질문 제목을 클릭하면 각 질문의 상세보기 화면으로 이동한다.
- 상세보기 화면에서는 답변을 추가할 수 있고, 질문과 답변의 수정/삭제가 가능하다.


## 웹서버 요구사항
1. index.html 응답하기
    - 1단계 
        - `InputStream`을 한 줄 안위로 읽기 위해 `BufferedReader`를 생성한다.
        - `BufferedReader.readLine()` 메소드를 활용해 라인별로 HTTP 요청 정보를 읽는다.
        - HTTP 요청 정보 전체를 출력한다.
    - 2단계
        - HTTP 요청 정보의 첫 번째 라인에서 요청 URL을 추출한다.
        - 구현은 별도의 유틸 클래스를 만들고 단위 테스트를 만들어 진행하면 편하다.
    - 3단계
        - 요청 URL에 해당하는 파일을 webapp 디렉토리에서 읽어 전달하면 된다.
   
2. GET 방식으로 회원가입하기
    - HTTP 요청의 첫 번째 라인에서 요청 URL을 추출한다.
    - 요청 URL에서 접근 경로와 `이름=값`으로 전달되는 데이터를 추출해 `User`클래스에 담는다.
    - 구현은 가능하면 `JUnit`을 활용해 단위 테스트를 진행하면서 하면 좀 더 효과적으로 개발 가능하다.
    - `이름=값` 파싱은 `util.HttpRequestUtils` 클래스의 `parseQueryString()` 메소드를 활용한다.
    - 요청 URL과 이름 값을 분리해야한다.
    
3. POST 방식으로 회원가입하기
    - POST로 데이터를 전달할 경우 전달하는 데이터는 HTTP 본문에 담긴다.
    - HTTP 본문은 HTTP 헤더 이후 빈 공백을 가지는 한 줄(line) 다음부터 시작한다.
    - HTTP 본문에 전달되는 데이터는 GET 방식으로 데이터를 전달할 때의 `이름=값`과 같다.
    - `BufferedReader`에서 본문 데이터는 `util.IOUtils` 클래스의 `readData()` 메소드를 활용한다. 본문의 길이는 HTTP 헤더의 Content-Length의 값이다.
    - 회원가입시 입력한 모든 데이터를 추출해 `User` 객체를 생성한다.
    
4. 302 status code 적용
    - HTTP 응답 헤더의 status code를 200이 아니라 302 code를 사용한다.
    
5. 로그인하기
    - 1단계
        - 로그인 성공시 HTTP 응답 헤더에 Set-Cookie를 추가해 로그인 성공 여부를 전달한다.
        - 브라우저는 다음과 같이 HTTP 요청 헤더에 Cookie 값으로 전달한다. 이렇게 전달받은 Cookie 값으로 로그인 유무를 판단한다. 
    - 2단계
        - 정상적으로 로그인 되었는지 확인하려면 앞 단계에서 회원가입한 데이터를 유지해야한다.
        - 아이디와 비밀번호가 같은지를 확인해 로그인이 성공하면 응답 헤더의 Set-Cookie 값을 `logined=true` 로그인이 실패할 경우 Set-Cookie 값을 `logined=false`로 설정한다.
        - 응답 헤더에 Set-Cookie 값을 설정한 훙 요청 헤더에 Cookie 값이 전달되는지 확인한다.

6. 사용자 목록 출력
    - 로그인 여부를 판다하기 위해 Cookie 값을 파싱하는 작업을 `util.HttpRequestUtils` 클래스의 `parseCookies()` 메소드를 활용한다.
    - `String` 값을 `Boolean`으로 변환하는 메소드는 `Boolean.parseBoolean()`으로 할 수 있다.

7. CSS 지원하기
    - 응답 헤더의 `Content-Type`을 `text/html`로 보내면 브라우저는 HTML 파일로 인식하기 때문에 CSS 가 정상적으로 동작하지 않는다.
    - CSS인 경우 응답 헤더의 `Content-Type`을 `text/css`로 전송한다. `Content-Type`은 확장자를 통해 구분할 수도 있으며, 요청 해더의 `Accept`를 활용할 수도 있다. 
